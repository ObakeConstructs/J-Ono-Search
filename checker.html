<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<title>J-Ono JSON Record Checker</title>
	<link rel='stylesheet' href='./global.css'>
</head>

<body onload="checker()">

  <div id="da_div">
  </div>
  
  <script type="text/javascript">
    
    const content_json = "https://raw.githubusercontent.com/ObakeConstructs/j-ono-data/main/json/";
    const content_img = "https://raw.githubusercontent.com/ObakeConstructs/j-ono-data/main/img/";
	  
    var out = document.getElementById("da_div");
  
    async function checker() {
      const response = await fetch(content_json + "index.json");
      const idx = await response.json();
      
  
      Object.entries(idx).forEach(([key, value]) => {
        value.forEach((v) => {
	  //console.log(key, value);
          results(key, v);
        });
      })
    } 
	  
    async function results(letter, word) {
      const response = await fetch(content_json + letter + "/" + word + ".json");
      const details = await response.json();
      /*
      try {
        const response = await fetch(content_json + letter + "/" + word + ".json");
        const details = await response.json();
      }
      catch(err) {
        console.log("####### Error Fetching Details: " + word);
        console.log(err.message);
      }
      */
      
      out.innerHTML += word + "<br />";
      checkDetails(details);
      out.innerHTML += "<br /><br /><br /><br /><br /><br /><br /><br />";
    }
    
    function checkDetails(details) {
      details.examples.forEach((itm) => {
        var path = content_img + (itm.indexOf("/") > -1 ? "" : itm.substring(0, 1) + "/") + itm + (itm.indexOf(".") > -1 ? "" : ".jpg");
        out.innerHTML += "<img src=\"" + path + "\" width=\"100px\" align=\"left\" />";
      });
    }
	  
  </script>

</body>
